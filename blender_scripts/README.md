# Blender スクリプト

## split_city_blocks.py

街メッシュをグリッド状にブロック分割するスクリプトです。  
分割したオブジェクトは GLB エクスポート時に「メッシュごと」になり、ゲーム側の AABB 近接判定がブロック単位で効くようになります。

### 使い方

1. Blender で分割したい街オブジェクトを選択する
2. 画面上部のワークスペースを **「スクリプティング」** に切り替える
3. 左側のテキストエディタで **「新規」** を押し、**「テキストを開く」** から `split_city_blocks.py` を開く
4. スクリプト先頭の `BLOCK_SIZE_X` と `BLOCK_SIZE_Y` を好みのブロック幅（メートル）に変更する（例: 50）。Blender は Z-up なので地面は XY 平面です
5. **「スクリプトを実行」**（▶ ボタン、または `Alt + P`）を押す
6. 同じコレクションに `Block_0_0`, `Block_0_1`, … が作成される
7. 元のオブジェクトはデフォルトで削除される（残したい場合はスクリプト内の `DELETE_ORIGINAL = False` に変更）

### パラメータ

| 変数 | 説明 | 例 |
|------|------|-----|
| `BLOCK_SIZE_X` | X 方向のブロック幅（m） | 50.0 |
| `BLOCK_SIZE_Y` | Y 方向のブロック幅（m）。Blender は Z-up なので地面は XY 平面 | 50.0 |
| `DELETE_ORIGINAL` | 実行後に元オブジェクトを削除するか | True |

### 注意

- Blender は Z-up なので、地面は XY 平面です。オブジェクトのワールド座標の X・Y でグリッドを計算しています（Z は高さのためブロック分割に使わない）
- ブロック幅を小さくしすぎるとオブジェクト数が増え、GLB が重くなる場合があります
