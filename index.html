<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D 街中ラン</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="loading-overlay">
    <div class="spinner"></div>
    <div class="text">Loading... / 読み込み中</div>
    <div class="progress-wrap">
      <div class="progress-fill" id="loadingProgressFill"></div>
    </div>
    <div class="progress-pct" id="loadingProgressPct">0%</div>
  </div>
  <div id="ui">
    <div class="energy-wrap">
      <div class="energy-label">エネルギー</div>
      <div class="energy-bar-bg">
        <div class="energy-bar" id="energyBar"></div>
      </div>
    </div>
    <div class="status-panel" aria-hidden="true">
      <div class="status-row"><span>生存</span><span id="statusSurvival">0:00</span></div>
      <div class="status-row"><span>転生</span><span id="statusReincarnation">0</span></div>
      <div class="status-row"><span>攻撃</span><span id="statusAttack">10</span></div>
      <div class="status-row"><span>防御</span><span id="statusDefense">5</span></div>
      <div class="status-row"><span>回避</span><span id="statusEvasion">5</span></div>
      <div class="status-row"><span>取得範囲</span><span id="statusPickupRange">5</span></div>
      <div class="status-row"><span>グリップ</span><span id="statusGrip">1</span></div>
      <div class="status-row"><span>吸収力</span><span id="statusAbsorb">1</span></div>
      <div class="status-row"><span>索敵</span><span id="statusSearch">5</span></div>
    </div>
    <div class="inventory-panel" aria-hidden="true">
      <div class="inventory-header">バッグ <span id="inventoryCount">0</span>/<span id="inventoryMax">5</span></div>
      <div class="inventory-slots" id="inventorySlots"></div>
    </div>
    <div class="mask-panel" aria-hidden="true">
      <div class="mask-header">マスク: <span id="maskCount">0</span> 個</div>
      <div class="mask-slots" id="maskSlots"></div>
    </div>
    <div class="buff-panel" aria-hidden="true">
      <div class="buff-header">バフ・キュー</div>
      <div class="buff-active" id="buffActive"></div>
      <div class="buff-queue" id="buffQueue"></div>
    </div>
  </div>
  <div class="enemy-guide" id="enemyGuide" aria-hidden="true">
    <div class="enemy-guide-label">索敵</div>
    <div class="enemy-guide-list" id="enemyGuideList"></div>
  </div>
  <div class="boss-panel" id="bossPanel" aria-hidden="true">
    <div class="boss-label">ライバル</div>
    <div class="boss-hp"><span id="bossHp">0</span>/<span id="bossHpMax">100</span></div>
    <div class="boss-masks">マスク <span id="bossMaskCount">0</span></div>
  </div>
  <div class="pos-meter" aria-hidden="true">
    <div class="label">POS (XYZ)</div>
    <div class="row"><span>X: <span id="posX">0</span></span><span>Y: <span id="posY">0</span></span><span>Z: <span id="posZ">0</span></span></div>
  </div>
  <div class="alt-meter" aria-hidden="true">
    <span class="label">ALT</span>
    <div>
      <span class="value" id="altValue">0</span><span class="unit">m</span>
    </div>
    <div class="gauge">
      <div class="gauge-fill" id="altGauge"></div>
    </div>
  </div>
  <div class="speed-meter" aria-hidden="true">
    <span class="label">SPEED</span>
    <div>
      <span class="value" id="speedValue">0</span><span class="unit">m/s</span>
    </div>
    <div class="gauge">
      <div class="gauge-fill" id="speedGauge"></div>
    </div>
  </div>
  <div class="direction-meter" aria-hidden="true">
    <div class="labels">
      <span class="n">N</span><span class="e">E</span><span class="s">S</span><span class="w">W</span>
    </div>
    <div class="needle" id="directionNeedle"></div>
  </div>
  <div class="debug-panel">
    <div class="debug-row">
      <input type="checkbox" id="debugCheckbox" />
      <label for="debugCheckbox">Debug</label>
      <span id="debugFps" class="debug-fps" aria-hidden="true"></span>
    </div>
    <div id="debugMenu" class="debug-menu" aria-hidden="true">
      <label><input type="checkbox" id="debugProximityCheckbox" checked /> 近接半透明</label>
      <label><input type="checkbox" id="debugCheckerCheckbox" checked /> 近接時の市松模様（オフで負荷軽減）</label>
      <span id="debugCheckerState" class="debug-state" aria-hidden="true"></span>
      <label><input type="checkbox" id="debugWorldCheckerCheckbox" checked /> 市松をワールド座標で表示（UVが無いモデル用）</label>
    </div>
  </div>
  <p class="hint">W: 加速+上昇　S: 減速+下降　A/D: 旋回　Q/E: 上下　何もしないと約1秒で自動下降（26mまで）　食べ物で回復</p>

  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
      }
    }
  </script>
  <script type="module" src="js/main.js"></script>
</body>
</html>
